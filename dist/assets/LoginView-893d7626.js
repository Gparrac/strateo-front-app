import{p as K,aE as O,aF as Q,B as W,C as b,aG as Z,aH as q,r as _,c as S,d as x,ad as ee,aI as ae,aJ as A,aK as I,P as a,T as P,aw as te,aL as le,V as oe,aM as se,aN as ne,_ as ie,aO as re,X as p,Y as h,Z as o,aP as ue,aQ as de,aR as ce,a5 as D,aS as me,aT as fe,aU as d,aV as g,aW as C,aX as Ve,aY as pe,S as he,a3 as ve}from"./index-b3cd7ec9.js";import{A as ye}from"./AuthUser-355ddbeb.js";const we=K({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...O(),...Q()},"VSwitch"),ge=W()({name:"VSwitch",inheritAttrs:!1,props:we(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:c,slots:l}=t;const n=b(e,"indeterminate"),i=b(e,"modelValue"),{loaderClasses:s}=Z(e),{isFocused:U,focus:B,blur:F}=q(e),k=_(),R=S(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),$=x(),L=S(()=>e.id||`switch-${$}`);function N(){n.value&&(n.value=!1)}function z(m){var f,V;m.stopPropagation(),m.preventDefault(),(V=(f=k.value)==null?void 0:f.input)==null||V.click()}return ee(()=>{const[m,f]=ae(c),V=A.filterProps(e),M=I.filterProps(e);return a(A,P({class:["v-switch",{"v-switch--inset":e.inset},{"v-switch--indeterminate":n.value},s.value,e.class]},m,V,{modelValue:i.value,"onUpdate:modelValue":v=>i.value=v,id:L.value,focused:U.value,style:e.style}),{...l,default:v=>{let{id:X,messagesId:Y,isDisabled:j,isReadonly:E,isValid:G}=v;return a(I,P({ref:k},M,{modelValue:i.value,"onUpdate:modelValue":[u=>i.value=u,N],id:X.value,"aria-describedby":Y.value,type:"checkbox","aria-checked":n.value?"mixed":void 0,disabled:j.value,readonly:E.value,onFocus:B,onBlur:F},f),{...l,default:u=>{let{backgroundColorClasses:y,backgroundColorStyles:r}=u;return a("div",{class:["v-switch__track",...y.value],style:r.value,onClick:z},null)},input:u=>{let{inputNode:y,icon:r,backgroundColorClasses:H,backgroundColorStyles:J}=u;return a(te,null,[y,a("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":r||e.loading},e.inset?void 0:H.value],style:e.inset?void 0:J.value},[a(le,null,{default:()=>[e.loading?a(se,{name:"v-switch",active:!0,color:G.value===!1?void 0:R.value},{default:w=>l.loader?l.loader(w):a(ne,{active:w.isActive,color:w.color,indeterminate:!0,size:"16",width:"2"},null)}):r&&a(oe,{key:r,icon:r,size:"x-small"},null)]})])])}})}})}),{}}}),Ce=new de,T=new ye,ke={name:"LoginView",data:()=>({typeAuth:!1,form:{},typesDocument:[],loader:!1,rulesValidation:re}),mounted(){this.getTypeDocument()},methods:{async getTypeDocument(){const e=await Ce.get("/type-document-user");this.typesDocument=e.data},async logIn(){this.loader=!0;const{valid:e}=await this.$refs.form.validate();if(e){const l=new FormData;this.typeAuth?l.append("email",this.form.email):(l.append("type_document",this.form.typesDocument),l.append("identification",this.form.identification)),l.append("password",this.form.password);const n=await T.login(l);if(n.statusResponse!=200){var t=new URL(window.location.href),c=t.searchParams.has("error");c?window.location.reload(!0):(t.searchParams.set("error","true"),window.location.href=t.toString());return}console.log("try",n),localStorage.setItem("auth-token",n.data.access_token),localStorage.setItem("user",n.data.user);const i=await T.user(l);console.log(i),this.$router.push("/")}this.loader=!1}}};function be(e,t,c,l,n,i){return p(),h(ue,{class:"d-flex justify-center align-center h-screen",ref:"form"},{default:o(()=>[a(ve,{width:"512",loading:e.loader},{default:o(()=>[a(ce,{class:"text-h3 pt-5 text-center"},{default:o(()=>[D(" Inicio de sesión ")]),_:1}),a(me,null,{default:o(()=>[a(fe,null,{default:o(()=>[a(d,{cols:"12"},{default:o(()=>[a(ge,{modelValue:e.typeAuth,"onUpdate:modelValue":t[0]||(t[0]=s=>e.typeAuth=s),label:"Ingreso por "+(e.typeAuth?"correo":"número de documento"),color:e.typeAuth?"orange":"primary"},null,8,["modelValue","label","color"])]),_:1}),e.typeAuth?(p(),h(d,{key:0,cols:"12"},{default:o(()=>[a(g,{label:"Correo",modelValue:e.form.email,"onUpdate:modelValue":t[1]||(t[1]=s=>e.form.email=s),rules:e.rulesValidation.email},null,8,["modelValue","rules"])]),_:1})):C("",!0),e.typeAuth?C("",!0):(p(),h(d,{key:1,cols:"12",sm:"6"},{default:o(()=>[a(Ve,{items:e.typesDocument,label:"Tipo de documento",modelValue:e.form.typesDocument,"onUpdate:modelValue":t[2]||(t[2]=s=>e.form.typesDocument=s),"item-title":"label","item-value":"name",rules:e.rulesValidation.select},null,8,["items","modelValue","rules"])]),_:1})),e.typeAuth?C("",!0):(p(),h(d,{key:2,cols:"12",sm:"6"},{default:o(()=>[a(g,{label:"Identificación",modelValue:e.form.identification,"onUpdate:modelValue":t[3]||(t[3]=s=>e.form.identification=s),rules:e.rulesValidation.identification},null,8,["modelValue","rules"])]),_:1})),a(d,{cols:"12"},{default:o(()=>[a(g,{label:"password",type:"password",rules:e.rulesValidation.password,modelValue:e.form.password,"onUpdate:modelValue":t[4]||(t[4]=s=>e.form.password=s)},null,8,["rules","modelValue"])]),_:1})]),_:1})]),_:1}),a(pe,null,{default:o(()=>[a(he,{color:"orange",onClick:i.logIn},{default:o(()=>[D(" Iniciar ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["loading"])]),_:1},512)}const Ie=ie(ke,[["render",be]]);export{Ie as default};
