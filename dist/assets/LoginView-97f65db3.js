import{p as G,aN as H,aO as K,B as Q,C as S,aP as W,aQ as Z,r as q,c as A,d as _,ab as ee,aR as ae,aS as I,aT as P,P as a,T as D,au as te,aU as le,V as oe,aV as se,aW as ne,_ as ie,aE as re,X as p,Y as h,Z as l,aG as ue,aX as de,aH as me,a6 as w,aI as ce,aJ as fe,aK as d,aL as C,aD as k,aY as Ve,a9 as pe,S as T,aM as he,a3 as ge}from"./index-ee819ca0.js";import{A as ve}from"./AuthUser-6df8dcb7.js";const ye=G({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...H(),...K()},"VSwitch"),we=Q()({name:"VSwitch",inheritAttrs:!1,props:ye(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:m,slots:s}=t;const n=S(e,"indeterminate"),i=S(e,"modelValue"),{loaderClasses:o}=W(e),{isFocused:B,focus:U,blur:L}=Z(e),b=q(),$=A(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),F=_(),N=A(()=>e.id||`switch-${F}`);function R(){n.value&&(n.value=!1)}function x(c){var f,V;c.stopPropagation(),c.preventDefault(),(V=(f=b.value)==null?void 0:f.input)==null||V.click()}return ee(()=>{const[c,f]=ae(m),V=I.filterProps(e),z=P.filterProps(e);return a(I,D({class:["v-switch",{"v-switch--inset":e.inset},{"v-switch--indeterminate":n.value},o.value,e.class]},c,V,{modelValue:i.value,"onUpdate:modelValue":g=>i.value=g,id:N.value,focused:B.value,style:e.style}),{...s,default:g=>{let{id:O,messagesId:j,isDisabled:J,isReadonly:M,isValid:X}=g;return a(P,D({ref:b},z,{modelValue:i.value,"onUpdate:modelValue":[u=>i.value=u,R],id:O.value,"aria-describedby":j.value,type:"checkbox","aria-checked":n.value?"mixed":void 0,disabled:J.value,readonly:M.value,onFocus:U,onBlur:L},f),{...s,default:u=>{let{backgroundColorClasses:v,backgroundColorStyles:r}=u;return a("div",{class:["v-switch__track",...v.value],style:r.value,onClick:x},null)},input:u=>{let{inputNode:v,icon:r,backgroundColorClasses:Y,backgroundColorStyles:E}=u;return a(te,null,[v,a("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":r||e.loading},e.inset?void 0:Y.value],style:e.inset?void 0:E.value},[a(le,null,{default:()=>[e.loading?a(se,{name:"v-switch",active:!0,color:X.value===!1?void 0:$.value},{default:y=>s.loader?s.loader(y):a(ne,{active:y.isActive,color:y.color,indeterminate:!0,size:"16",width:"2"},null)}):r&&a(oe,{key:r,icon:r,size:"x-small"},null)]})])])}})}})}),{}}}),Ce=new de,ke=new ve,be={name:"LoginView",data:()=>({typeAuth:!1,form:{},typesDocument:[],loader:!1,rulesValidation:re}),mounted(){this.getTypeDocument()},methods:{async getTypeDocument(){const e=await Ce.get("/type-document-user");this.typesDocument=e.data},async logIn(){this.loader=!0;const{valid:e}=await this.$refs.form.validate();if(e){const s=new FormData;this.typeAuth?s.append("email",this.form.email):(s.append("type_document",this.form.typesDocument),s.append("identification",this.form.identification)),s.append("password",this.form.password);const n=await ke.login(s);if(n.statusResponse!=200){var t=new URL(window.location.href),m=t.searchParams.has("error");m?window.location.reload(!0):(t.searchParams.set("error","true"),window.location.href=t.toString());return}localStorage.setItem("auth-token",n.data.access_token),localStorage.setItem("user",JSON.stringify(n.user)),this.$router.push("/")}this.loader=!1}}},Se={class:"d-flex justify-end"};function Ae(e,t,m,s,n,i){return p(),h(ue,{class:"d-flex justify-center align-center h-screen",ref:"form"},{default:l(()=>[a(ge,{width:"512",loading:e.loader},{default:l(()=>[a(me,{class:"text-h3 pt-5 text-center"},{default:l(()=>[w(" Inicio de sesión ")]),_:1}),a(ce,null,{default:l(()=>[a(fe,null,{default:l(()=>[a(d,{cols:"12"},{default:l(()=>[a(we,{modelValue:e.typeAuth,"onUpdate:modelValue":t[0]||(t[0]=o=>e.typeAuth=o),label:"Ingreso por "+(e.typeAuth?"correo":"número de documento"),color:e.typeAuth?"orange":"primary"},null,8,["modelValue","label","color"])]),_:1}),e.typeAuth?(p(),h(d,{key:0,cols:"12"},{default:l(()=>[a(C,{maxlength:e.rulesValidation.email.maxLength,label:"Correo",modelValue:e.form.email,"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.email=o),rules:e.rulesValidation.email.rules},null,8,["maxlength","modelValue","rules"])]),_:1})):k("",!0),e.typeAuth?k("",!0):(p(),h(d,{key:1,cols:"12",sm:"6"},{default:l(()=>[a(Ve,{items:e.typesDocument,label:"Tipo de documento",modelValue:e.form.typesDocument,"onUpdate:modelValue":t[2]||(t[2]=o=>e.form.typesDocument=o),"item-title":"label","item-value":"name",rules:e.rulesValidation.select.rules},null,8,["items","modelValue","rules"])]),_:1})),e.typeAuth?k("",!0):(p(),h(d,{key:2,cols:"12",sm:"6"},{default:l(()=>[a(C,{maxlength:e.rulesValidation.identification.maxLength,label:"Identificación",modelValue:e.form.identification,"onUpdate:modelValue":t[3]||(t[3]=o=>e.form.identification=o),rules:e.rulesValidation.identification.rules},null,8,["maxlength","modelValue","rules"])]),_:1})),a(d,{cols:"12"},{default:l(()=>[a(C,{maxlength:e.rulesValidation.password.maxLength,label:"Contraseña",type:"password",rules:e.rulesValidation.password.rules,modelValue:e.form.password,"onUpdate:modelValue":t[4]||(t[4]=o=>e.form.password=o)},null,8,["maxlength","rules","modelValue"])]),_:1})]),_:1}),pe("div",Se,[a(T,{variant:"text",class:"text-right text-orange text-body-2",size:"sm",onClick:t[5]||(t[5]=o=>e.$router.push("recovery-password"))},{default:l(()=>[w("Olvidaste tu contraseña?")]),_:1})])]),_:1}),a(he,null,{default:l(()=>[a(T,{color:"orange",onClick:i.logIn},{default:l(()=>[w(" Iniciar ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["loading"])]),_:1},512)}const De=ie(be,[["render",Ae]]);export{De as default};
