import{p as G,aH as Q,aI as X,a1 as Y,aj as I,aJ as Z,aK as W,r as ee,c as P,d as ae,a4 as te,aL as le,aM as U,aN as B,q as a,am as T,S as $,ag as se,aO as oe,B as ne,aP as re,aQ as ie,_ as ue,R as de,K as ce,az as me,aD as fe,aA as pe,m as h,n as he,w as l,X as Ve,aR as ge,H as ve,V as ye,aE as we,z as k,P as ke,aF as Ce,aG as c,M as C,Y as S,T as b,Z as Se,D as be,N as F,U as Ae}from"./index-92945f7f.js";import{A as De}from"./AlertMessage-580a688a.js";const Ie=G({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Q(),...X()},"VSwitch"),Pe=Y()({name:"VSwitch",inheritAttrs:!1,props:Ie(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:o,slots:n}=t;const u=I(e,"indeterminate"),i=I(e,"modelValue"),{loaderClasses:V}=Z(e),{isFocused:s,focus:L,blur:M}=W(e),A=ee(),N=P(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),R=ae(),z=P(()=>e.id||`switch-${R}`);function x(){u.value&&(u.value=!1)}function j(m){var f,p;m.stopPropagation(),m.preventDefault(),(p=(f=A.value)==null?void 0:f.input)==null||p.click()}return te(()=>{const[m,f]=le(o),p=U.filterProps(e),E=B.filterProps(e);return a(U,T({class:["v-switch",{"v-switch--inset":e.inset},{"v-switch--indeterminate":u.value},V.value,e.class]},m,p,{modelValue:i.value,"onUpdate:modelValue":g=>i.value=g,id:z.value,focused:s.value,style:e.style}),{...n,default:g=>{let{id:O,messagesId:H,isDisabled:J,isReadonly:K,isValid:D}=g;const v={model:i,isValid:D};return a(B,T({ref:A},E,{modelValue:i.value,"onUpdate:modelValue":[d=>i.value=d,x],id:O.value,"aria-describedby":H.value,type:"checkbox","aria-checked":u.value?"mixed":void 0,disabled:J.value,readonly:K.value,onFocus:L,onBlur:M},f),{...n,default:d=>{let{backgroundColorClasses:y,backgroundColorStyles:r}=d;return a("div",{class:["v-switch__track",...y.value],style:r.value,onClick:j},[n["track-true"]&&a("div",{key:"prepend",class:"v-switch__track-true"},[n["track-true"](v)]),n["track-false"]&&a("div",{key:"append",class:"v-switch__track-false"},[n["track-false"](v)])])},input:d=>{let{inputNode:y,icon:r,backgroundColorClasses:_,backgroundColorStyles:q}=d;return a($,null,[y,a("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":r||e.loading},e.inset?void 0:_.value],style:e.inset?void 0:q.value},[n.thumb?a(se,{defaults:{VIcon:{icon:r,size:"x-small"}}},{default:()=>[n.thumb({...v,icon:r})]}):a(oe,null,{default:()=>[e.loading?a(re,{name:"v-switch",active:!0,color:D.value===!1?void 0:N.value},{default:w=>n.loader?n.loader(w):a(ie,{active:w.isActive,color:w.color,indeterminate:!0,size:"16",width:"2"},null)}):r&&a(ne,{key:String(r),icon:r,size:"x-small"},null)]})])])}})}})}),{}}}),Ue=new ge,Be=new ve,Te={name:"LoginView",components:{AlertMessage:De},data:()=>({typeAuth:!1,form:{},typesDocument:[],loader:!1,rulesValidation:de}),mounted(){this.getTypeDocument()},computed:{...ce(fe,me)},methods:{async getTypeDocument(){const e=await Ue.get("/type-document-user");this.typesDocument=e.data},async logIn(){this.loader=!0;const{valid:e}=await this.$refs.form.validate();if(e){const t=new FormData;this.typeAuth?t.append("email",this.form.email):(t.append("type_document",this.form.typesDocument),t.append("identification",this.form.identification)),t.append("password",this.form.password);const o=await Be.login(t);o.statusResponse!=200?o.error&&typeof o.error=="object"?this.alertMessageStore.show(!1,"Verifica los campos.",o.error):this.alertMessageStore.show(!1,"Error en el servidor."):(this.alertMessageStore.show(!0,"Autenticación exitosa!"),this.userAuthStore.saveCredentials({user:o.user,...o.data}),localStorage.setItem("auth-token",o.data.access_token),localStorage.setItem("user",JSON.stringify(o.user)),this.$router.push("/"))}this.loader=!1}}},Fe={class:"d-flex justify-end"};function $e(e,t,o,n,u,i){const V=pe("alert-message");return h(),he($,null,[a(V),a(Ve,{class:"d-flex justify-center align-center h-screen",ref:"form"},{default:l(()=>[a(ye,{width:"512",loading:e.loader},{default:l(()=>[a(we,{class:"text-h3 pt-5 text-center"},{default:l(()=>[k(" Inicio de sesión ")]),_:1}),a(ke,null,{default:l(()=>[a(Ce,null,{default:l(()=>[a(c,{cols:"12"},{default:l(()=>[a(Pe,{modelValue:e.typeAuth,"onUpdate:modelValue":t[0]||(t[0]=s=>e.typeAuth=s),label:"Ingreso por "+(e.typeAuth?"correo":"número de documento"),color:e.typeAuth?"orange":"primary"},null,8,["modelValue","label","color"])]),_:1}),e.typeAuth?(h(),C(c,{key:0,cols:"12"},{default:l(()=>[a(S,{maxlength:e.rulesValidation.email.maxLength,label:"Correo",modelValue:e.form.email,"onUpdate:modelValue":t[1]||(t[1]=s=>e.form.email=s),rules:e.rulesValidation.email.rules},null,8,["maxlength","modelValue","rules"])]),_:1})):b("",!0),e.typeAuth?b("",!0):(h(),C(c,{key:1,cols:"12",sm:"6"},{default:l(()=>[a(Se,{items:e.typesDocument,label:"Tipo de documento",modelValue:e.form.typesDocument,"onUpdate:modelValue":t[2]||(t[2]=s=>e.form.typesDocument=s),"item-title":"label","item-value":"name",rules:e.rulesValidation.select.rules},null,8,["items","modelValue","rules"])]),_:1})),e.typeAuth?b("",!0):(h(),C(c,{key:2,cols:"12",sm:"6"},{default:l(()=>[a(S,{maxlength:e.rulesValidation.identification.maxLength,label:"Identificación",modelValue:e.form.identification,"onUpdate:modelValue":t[3]||(t[3]=s=>e.form.identification=s),rules:e.rulesValidation.identification.rules},null,8,["maxlength","modelValue","rules"])]),_:1})),a(c,{cols:"12"},{default:l(()=>[a(S,{maxlength:e.rulesValidation.password.maxLength,label:"Contraseña",type:"password",rules:e.rulesValidation.password.rules,modelValue:e.form.password,"onUpdate:modelValue":t[4]||(t[4]=s=>e.form.password=s)},null,8,["maxlength","rules","modelValue"])]),_:1})]),_:1}),be("div",Fe,[a(F,{variant:"text",class:"text-right text-orange text-body-2",size:"sm",onClick:t[5]||(t[5]=s=>e.$router.push("recovery-password"))},{default:l(()=>[k("Olvidaste tu contraseña?")]),_:1})])]),_:1}),a(Ae,null,{default:l(()=>[a(F,{color:"orange",onClick:i.logIn},{default:l(()=>[k(" Iniciar ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["loading"])]),_:1},512)],64)}const Ne=ue(Te,[["render",$e]]);export{Ne as default};
