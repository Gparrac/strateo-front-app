import{p as K,m as O,a as Q,g as W,u as b,b as X,d as Y,r as Z,e as A,f as _,h as x,i as ee,V as S,j as D,k as a,l as I,F as ae,n as te,q as le,L as oe,s as se,_ as ne,R as ie,o as p,t as h,w as l,v as re,P as ue,A as de,x as ce,y as P,z as me,B as fe,C as d,D as g,E as C,G as Ve,H as pe,I as he,J as ve}from"./index-edeecd89.js";const ye=K({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...O(),...Q()},"VSwitch"),we=W()({name:"VSwitch",inheritAttrs:!1,props:ye(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:c,slots:o}=t;const n=b(e,"indeterminate"),i=b(e,"modelValue"),{loaderClasses:s}=X(e),{isFocused:B,focus:F,blur:T}=Y(e),k=Z(),U=A(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),R=_(),$=A(()=>e.id||`switch-${R}`);function L(){n.value&&(n.value=!1)}function N(m){var f,V;m.stopPropagation(),m.preventDefault(),(V=(f=k.value)==null?void 0:f.input)==null||V.click()}return x(()=>{const[m,f]=ee(c),V=S.filterProps(e),z=D.filterProps(e);return a(S,I({class:["v-switch",{"v-switch--inset":e.inset},{"v-switch--indeterminate":n.value},s.value,e.class]},m,V,{modelValue:i.value,"onUpdate:modelValue":v=>i.value=v,id:$.value,focused:B.value,style:e.style}),{...o,default:v=>{let{id:j,messagesId:q,isDisabled:E,isReadonly:G,isValid:H}=v;return a(D,I({ref:k},z,{modelValue:i.value,"onUpdate:modelValue":[u=>i.value=u,L],id:j.value,"aria-describedby":q.value,type:"checkbox","aria-checked":n.value?"mixed":void 0,disabled:E.value,readonly:G.value,onFocus:F,onBlur:T},f),{...o,default:u=>{let{backgroundColorClasses:y,backgroundColorStyles:r}=u;return a("div",{class:["v-switch__track",...y.value],style:r.value,onClick:N},null)},input:u=>{let{inputNode:y,icon:r,backgroundColorClasses:J,backgroundColorStyles:M}=u;return a(ae,null,[y,a("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":r||e.loading},e.inset?void 0:J.value],style:e.inset?void 0:M.value},[a(te,null,{default:()=>[e.loading?a(oe,{name:"v-switch",active:!0,color:H.value===!1?void 0:U.value},{default:w=>o.loader?o.loader(w):a(se,{active:w.isActive,color:w.color,indeterminate:!0,size:"16",width:"2"},null)}):r&&a(le,{key:r,icon:r,size:"x-small"},null)]})])])}})}})}),{}}}),ge=new ue,Ce=new de,ke={name:"LoginView",data:()=>({typeAuth:!1,form:{},typesDocument:[],loader:!1,rulesValidation:ie}),mounted(){this.getTypeDocument()},methods:{async getTypeDocument(){const e=await ge.get("/type-document-user");this.typesDocument=e.data},async logIn(){this.loader=!0;const{valid:e}=await this.$refs.form.validate();if(e){const o=new FormData;this.typeAuth?o.append("email",this.form.email):(o.append("type_document",this.form.typesDocument),o.append("identification",this.form.identification)),o.append("password",this.form.password);const n=await Ce.login(o);if(n.statusResponse!=200){var t=new URL(window.location.href),c=t.searchParams.has("error");c?window.location.reload(!0):(t.searchParams.set("error","true"),window.location.href=t.toString());return}localStorage.setItem("auth-token",n.data.access_token),this.$router.push("/")}this.loader=!1}}};function be(e,t,c,o,n,i){return p(),h(re,{class:"d-flex justify-center align-center h-screen",ref:"form"},{default:l(()=>[a(ve,{width:"512",loading:e.loader},{default:l(()=>[a(ce,{class:"text-h3 pt-5 text-center"},{default:l(()=>[P(" Inicio de sesión ")]),_:1}),a(me,null,{default:l(()=>[a(fe,null,{default:l(()=>[a(d,{cols:"12"},{default:l(()=>[a(we,{modelValue:e.typeAuth,"onUpdate:modelValue":t[0]||(t[0]=s=>e.typeAuth=s),label:"Ingreso por "+(e.typeAuth?"correo":"número de documento"),color:e.typeAuth?"orange":"primary"},null,8,["modelValue","label","color"])]),_:1}),e.typeAuth?(p(),h(d,{key:0,cols:"12"},{default:l(()=>[a(g,{label:"Correo",modelValue:e.form.email,"onUpdate:modelValue":t[1]||(t[1]=s=>e.form.email=s),rules:e.rulesValidation.email},null,8,["modelValue","rules"])]),_:1})):C("",!0),e.typeAuth?C("",!0):(p(),h(d,{key:1,cols:"12",sm:"6"},{default:l(()=>[a(Ve,{items:e.typesDocument,label:"Tipo de documento",modelValue:e.form.typesDocument,"onUpdate:modelValue":t[2]||(t[2]=s=>e.form.typesDocument=s),"item-title":"label","item-value":"name",rules:e.rulesValidation.select},null,8,["items","modelValue","rules"])]),_:1})),e.typeAuth?C("",!0):(p(),h(d,{key:2,cols:"12",sm:"6"},{default:l(()=>[a(g,{label:"Identificación",modelValue:e.form.identification,"onUpdate:modelValue":t[3]||(t[3]=s=>e.form.identification=s),rules:e.rulesValidation.identification},null,8,["modelValue","rules"])]),_:1})),a(d,{cols:"12"},{default:l(()=>[a(g,{label:"password",type:"password",rules:e.rulesValidation.password,modelValue:e.form.password,"onUpdate:modelValue":t[4]||(t[4]=s=>e.form.password=s)},null,8,["rules","modelValue"])]),_:1})]),_:1})]),_:1}),a(pe,null,{default:l(()=>[a(he,{color:"orange",onClick:i.logIn},{default:l(()=>[P(" Iniciar ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["loading"])]),_:1},512)}const Se=ne(ke,[["render",be]]);export{Se as default};
