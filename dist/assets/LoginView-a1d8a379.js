import{_ as h,au as c,am as g,an as y,av as w,ao as A,m as n,n as C,q as t,w as s,aw as v,ai as D,aD as S,H as k,V as b,ax as I,z as i,ay as U,az as T,aA as r,ap as u,aB as d,at as m,aE as $,D as B,aa as p,aC as L}from"./index-78b1c42d.js";import{A as M,V as N}from"./VSwitch-ea357e34.js";const F=new S,j=new k,z={name:"LoginView",components:{AlertMessage:M},data:()=>({typeAuth:!1,form:{},typesDocument:[],loader:!1,rulesValidation:c}),mounted(){this.getTypeDocument()},computed:{...g(w,y)},methods:{async getTypeDocument(){const e=await F.get("/type-document-user");this.typesDocument=e.data},async logIn(){this.loader=!0;const{valid:e}=await this.$refs.form.validate();if(e){const a=new FormData;this.typeAuth?a.append("email",this.form.email):(a.append("type_document",this.form.typesDocument),a.append("identification",this.form.identification)),a.append("password",this.form.password);const l=await j.login(a);l.statusResponse!=200?l.error&&typeof l.error=="object"?this.alertMessageStore.show(!1,"Verifica los campos.",l.error):this.alertMessageStore.show(!1,"Error en el servidor."):(this.alertMessageStore.show(!0,"Autenticación exitosa!"),this.userAuthStore.saveCredentials({user:l.user,...l.data}),localStorage.setItem("auth-token",l.data.access_token),localStorage.setItem("user",JSON.stringify(l.user)),this.$router.push("/"))}this.loader=!1}}},E={class:"d-flex justify-end"};function R(e,a,l,O,q,f){const V=A("alert-message");return n(),C(D,null,[t(V),t(v,{class:"d-flex justify-center align-center h-screen",ref:"form"},{default:s(()=>[t(b,{width:"512",loading:e.loader},{default:s(()=>[t(I,{class:"text-h3 pt-5 text-center"},{default:s(()=>[i(" Inicio de sesión ")]),_:1}),t(U,null,{default:s(()=>[t(T,null,{default:s(()=>[t(r,{cols:"12"},{default:s(()=>[t(N,{modelValue:e.typeAuth,"onUpdate:modelValue":a[0]||(a[0]=o=>e.typeAuth=o),label:"Ingreso por "+(e.typeAuth?"correo":"número de documento"),color:e.typeAuth?"orange":"primary"},null,8,["modelValue","label","color"])]),_:1}),e.typeAuth?(n(),u(r,{key:0,cols:"12"},{default:s(()=>[t(d,{maxlength:e.rulesValidation.email.maxLength,label:"Correo",modelValue:e.form.email,"onUpdate:modelValue":a[1]||(a[1]=o=>e.form.email=o),rules:e.rulesValidation.email.rules},null,8,["maxlength","modelValue","rules"])]),_:1})):m("",!0),e.typeAuth?m("",!0):(n(),u(r,{key:1,cols:"12",sm:"6"},{default:s(()=>[t($,{items:e.typesDocument,label:"Tipo de documento",modelValue:e.form.typesDocument,"onUpdate:modelValue":a[2]||(a[2]=o=>e.form.typesDocument=o),"item-title":"label","item-value":"name",rules:e.rulesValidation.select.rules},null,8,["items","modelValue","rules"])]),_:1})),e.typeAuth?m("",!0):(n(),u(r,{key:2,cols:"12",sm:"6"},{default:s(()=>[t(d,{maxlength:e.rulesValidation.identification.maxLength,label:"Identificación",modelValue:e.form.identification,"onUpdate:modelValue":a[3]||(a[3]=o=>e.form.identification=o),rules:e.rulesValidation.identification.rules},null,8,["maxlength","modelValue","rules"])]),_:1})),t(r,{cols:"12"},{default:s(()=>[t(d,{maxlength:e.rulesValidation.password.maxLength,label:"Contraseña",type:"password",rules:e.rulesValidation.password.rules,modelValue:e.form.password,"onUpdate:modelValue":a[4]||(a[4]=o=>e.form.password=o)},null,8,["maxlength","rules","modelValue"])]),_:1})]),_:1}),B("div",E,[t(p,{variant:"text",class:"text-right text-orange text-body-2",size:"sm",onClick:a[5]||(a[5]=o=>e.$router.push("recovery-password"))},{default:s(()=>[i("Olvidaste tu contraseña?")]),_:1})])]),_:1}),t(L,null,{default:s(()=>[t(p,{color:"orange",onClick:f.logIn},{default:s(()=>[i(" Iniciar ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["loading"])]),_:1},512)],64)}const J=h(z,[["render",R]]);export{J as default};
