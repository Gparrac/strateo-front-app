import{A as p}from"./AuthUser-6df8dcb7.js";import{_ as g,aE as V,U as h,W as P,aF as C,X as n,Y as _,Z as r,aG as I,P as a,aH as x,a6 as i,aI as y,aJ as b,aK as u,aL as m,a9 as f,a2 as w,aC as M,au as R,aM as k,S as B,a3 as S,aB as v}from"./index-ee819ca0.js";const A=new p,F={data(){return{editItem:{},rulesValidation:V,errorMessages:[]}},computed:{confirmPasswordRule(){return[e=>!!e||"Contraseña es requerida",e=>e===this.editItem.newPassword||"Las contraseñas no coinciden"]},passwordRule(){return[e=>!!e||"Contraseña es requerida",e=>e!=this.editItem.oldPassword||"La nueva contraseña debe ser diferente a la anterior",e=>e&&e.length>=6||"Contraseña debe tener al menos 6 caracteres"]},...h(P)},methods:{async changePassword(){this.loading=!0;const{valid:e}=await this.$refs.form.validate();if(e){const s=new FormData;let l={};s.append("old_password",this.editItem.oldPassword),s.append("new_password",this.editItem.newPassword),l=await A.changePassword(s),l.statusResponse!=200?(l.error&&(this.errorMessages=C(l.error)),this.alertMessageStore.show(!1,"Error en el servidor")):(this.alertMessageStore.show(!0,"Poceso exitoso!"),this.$router.push("/"))}this.loading=!1}}},U={class:"pt-5"},L=f("br",null,null,-1);function N(e,s,l,T,o,d){return n(),_(I,{class:"d-flex justify-center align-center",ref:"form"},{default:r(()=>[a(S,{width:"512",loading:e.loader},{default:r(()=>[a(x,{class:"text-h4 py-5 text-center"},{default:r(()=>[i(" Cambiar contraseña ")]),_:1}),a(y,null,{default:r(()=>[a(b,null,{default:r(()=>[a(u,{cols:"12"},{default:r(()=>[a(m,{label:"Contraseña actual",type:"password",rules:o.rulesValidation.password.rules,modelValue:o.editItem.oldPassword,"onUpdate:modelValue":s[0]||(s[0]=t=>o.editItem.oldPassword=t)},null,8,["rules","modelValue"])]),_:1}),a(u,{cols:"12"},{default:r(()=>[a(m,{label:"Nueva contraseña",type:"password",modelValue:o.editItem.newPassword,"onUpdate:modelValue":s[1]||(s[1]=t=>o.editItem.newPassword=t),rules:d.passwordRule,loading:e.loading},null,8,["modelValue","rules","loading"])]),_:1}),a(u,{cols:"12"},{default:r(()=>[a(m,{label:"Confirmar contraseña",type:"password",modelValue:o.editItem.confirmPassword,"onUpdate:modelValue":s[2]||(s[2]=t=>o.editItem.confirmPassword=t),rules:d.confirmPasswordRule,loading:e.loading},null,8,["modelValue","rules","loading"])]),_:1})]),_:1}),f("div",U,[(n(!0),w(R,null,M(o.errorMessages,(t,c)=>(n(),w("small",{key:c,class:"text-orange"},[i(v(c+1+". "+t)+" ",1),L]))),128))])]),_:1}),a(k,null,{default:r(()=>[a(B,{color:"orange",onClick:d.changePassword},{default:r(()=>[i(" Guardar ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["loading"])]),_:1},512)}const q=g(F,[["render",N]]);export{q as default};
