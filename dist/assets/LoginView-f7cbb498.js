import{p as K,aE as Q,aF as W,M as X,a4 as b,aG as Y,aH as Z,r as _,c as D,d as ee,P as ae,aI as te,aJ as I,aK as B,q as a,a7 as P,ai as F,aL as le,B as se,aM as oe,aN as ne,_ as re,av as ie,am as ue,an as de,aw as me,ao as ce,m as V,n as fe,w as l,ax as pe,aO as Ve,H as he,V as ge,ay as ve,z as w,az as ye,aA as we,aB as m,ap as C,aC as k,at as A,aP as Ce,D as ke,aa as U,aD as Ae}from"./index-6cc0dd1e.js";import{A as Se}from"./AlertMessage-f4583fd0.js";const be=K({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Q(),...W()},"VSwitch"),De=X()({name:"VSwitch",inheritAttrs:!1,props:be(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:o,slots:i}=t;const u=b(e,"indeterminate"),n=b(e,"modelValue"),{loaderClasses:h}=Y(e),{isFocused:s,focus:T,blur:$}=Z(e),S=_(),L=D(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),M=ee(),N=D(()=>e.id||`switch-${M}`);function x(){u.value&&(u.value=!1)}function z(c){var f,p;c.stopPropagation(),c.preventDefault(),(p=(f=S.value)==null?void 0:f.input)==null||p.click()}return ae(()=>{const[c,f]=te(o),p=I.filterProps(e),R=B.filterProps(e);return a(I,P({class:["v-switch",{"v-switch--inset":e.inset},{"v-switch--indeterminate":u.value},h.value,e.class]},c,p,{modelValue:n.value,"onUpdate:modelValue":g=>n.value=g,id:N.value,focused:s.value,style:e.style}),{...i,default:g=>{let{id:j,messagesId:E,isDisabled:O,isReadonly:H,isValid:J}=g;return a(B,P({ref:S},R,{modelValue:n.value,"onUpdate:modelValue":[d=>n.value=d,x],id:j.value,"aria-describedby":E.value,type:"checkbox","aria-checked":u.value?"mixed":void 0,disabled:O.value,readonly:H.value,onFocus:T,onBlur:$},f),{...i,default:d=>{let{backgroundColorClasses:v,backgroundColorStyles:r}=d;return a("div",{class:["v-switch__track",...v.value],style:r.value,onClick:z},null)},input:d=>{let{inputNode:v,icon:r,backgroundColorClasses:q,backgroundColorStyles:G}=d;return a(F,null,[v,a("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":r||e.loading},e.inset?void 0:q.value],style:e.inset?void 0:G.value},[a(le,null,{default:()=>[e.loading?a(oe,{name:"v-switch",active:!0,color:J.value===!1?void 0:L.value},{default:y=>i.loader?i.loader(y):a(ne,{active:y.isActive,color:y.color,indeterminate:!0,size:"16",width:"2"},null)}):r&&a(se,{key:r,icon:r,size:"x-small"},null)]})])])}})}})}),{}}}),Ie=new Ve,Be=new he,Pe={name:"LoginView",components:{AlertMessage:Se},data:()=>({typeAuth:!1,form:{},typesDocument:[],loader:!1,rulesValidation:ie}),mounted(){this.getTypeDocument()},computed:{...ue(me,de)},methods:{async getTypeDocument(){const e=await Ie.get("/type-document-user");this.typesDocument=e.data},async logIn(){this.loader=!0;const{valid:e}=await this.$refs.form.validate();if(e){const t=new FormData;this.typeAuth?t.append("email",this.form.email):(t.append("type_document",this.form.typesDocument),t.append("identification",this.form.identification)),t.append("password",this.form.password);const o=await Be.login(t);o.statusResponse!=200?o.error&&typeof o.error=="object"?this.alertMessageStore.show(!1,"Verifica los campos.",o.error):this.alertMessageStore.show(!1,"Error en el servidor."):(this.alertMessageStore.show(!0,"Autenticación exitosa!"),this.userAuthStore.saveCredentials({user:o.user,...o.data}),localStorage.setItem("auth-token",o.data.access_token),localStorage.setItem("user",JSON.stringify(o.user)),this.$router.push("/"))}this.loader=!1}}},Ue={class:"d-flex justify-end"};function Fe(e,t,o,i,u,n){const h=ce("alert-message");return V(),fe(F,null,[a(h),a(pe,{class:"d-flex justify-center align-center h-screen",ref:"form"},{default:l(()=>[a(ge,{width:"512",loading:e.loader},{default:l(()=>[a(ve,{class:"text-h3 pt-5 text-center"},{default:l(()=>[w(" Inicio de sesión ")]),_:1}),a(ye,null,{default:l(()=>[a(we,null,{default:l(()=>[a(m,{cols:"12"},{default:l(()=>[a(De,{modelValue:e.typeAuth,"onUpdate:modelValue":t[0]||(t[0]=s=>e.typeAuth=s),label:"Ingreso por "+(e.typeAuth?"correo":"número de documento"),color:e.typeAuth?"orange":"primary"},null,8,["modelValue","label","color"])]),_:1}),e.typeAuth?(V(),C(m,{key:0,cols:"12"},{default:l(()=>[a(k,{maxlength:e.rulesValidation.email.maxLength,label:"Correo",modelValue:e.form.email,"onUpdate:modelValue":t[1]||(t[1]=s=>e.form.email=s),rules:e.rulesValidation.email.rules},null,8,["maxlength","modelValue","rules"])]),_:1})):A("",!0),e.typeAuth?A("",!0):(V(),C(m,{key:1,cols:"12",sm:"6"},{default:l(()=>[a(Ce,{items:e.typesDocument,label:"Tipo de documento",modelValue:e.form.typesDocument,"onUpdate:modelValue":t[2]||(t[2]=s=>e.form.typesDocument=s),"item-title":"label","item-value":"name",rules:e.rulesValidation.select.rules},null,8,["items","modelValue","rules"])]),_:1})),e.typeAuth?A("",!0):(V(),C(m,{key:2,cols:"12",sm:"6"},{default:l(()=>[a(k,{maxlength:e.rulesValidation.identification.maxLength,label:"Identificación",modelValue:e.form.identification,"onUpdate:modelValue":t[3]||(t[3]=s=>e.form.identification=s),rules:e.rulesValidation.identification.rules},null,8,["maxlength","modelValue","rules"])]),_:1})),a(m,{cols:"12"},{default:l(()=>[a(k,{maxlength:e.rulesValidation.password.maxLength,label:"Contraseña",type:"password",rules:e.rulesValidation.password.rules,modelValue:e.form.password,"onUpdate:modelValue":t[4]||(t[4]=s=>e.form.password=s)},null,8,["maxlength","rules","modelValue"])]),_:1})]),_:1}),ke("div",Ue,[a(U,{variant:"text",class:"text-right text-orange text-body-2",size:"sm",onClick:t[5]||(t[5]=s=>e.$router.push("recovery-password"))},{default:l(()=>[w("Olvidaste tu contraseña?")]),_:1})])]),_:1}),a(Ae,null,{default:l(()=>[a(U,{color:"orange",onClick:n.logIn},{default:l(()=>[w(" Iniciar ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["loading"])]),_:1},512)],64)}const Le=re(Pe,[["render",Fe]]);export{Le as default};
