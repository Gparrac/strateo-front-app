import{p as K,m as M,a as O,g as Q,u as b,b as W,d as X,r as Y,e as A,f as Z,h as x,i as ee,V as S,j as D,k as a,l as I,F as ae,n as te,q as le,L as oe,s as se,_ as ne,R as ie,o as V,t as p,w as l,v as re,P as ue,A as de,x as ce,y as P,z as me,B as fe,C as Ve,D as h,E as g,G as C,H as pe,I as he,J as ve,K as ye}from"./index-f6ba3782.js";const we=K({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...M(),...O()},"VSwitch"),ge=Q()({name:"VSwitch",inheritAttrs:!1,props:we(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:d,slots:o}=t;const n=b(e,"indeterminate"),i=b(e,"modelValue"),{loaderClasses:s}=W(e),{isFocused:B,focus:F,blur:T}=X(e),k=Y(),U=A(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),$=Z(),L=A(()=>e.id||`switch-${$}`);function R(){n.value&&(n.value=!1)}function N(c){var m,f;c.stopPropagation(),c.preventDefault(),(f=(m=k.value)==null?void 0:m.input)==null||f.click()}return x(()=>{const[c,m]=ee(d),f=S.filterProps(e),z=D.filterProps(e);return a(S,I({class:["v-switch",{"v-switch--inset":e.inset},{"v-switch--indeterminate":n.value},s.value,e.class]},c,f,{modelValue:i.value,"onUpdate:modelValue":v=>i.value=v,id:L.value,focused:B.value,style:e.style}),{...o,default:v=>{let{id:j,messagesId:_,isDisabled:q,isReadonly:E,isValid:G}=v;return a(D,I({ref:k},z,{modelValue:i.value,"onUpdate:modelValue":[u=>i.value=u,R],id:j.value,"aria-describedby":_.value,type:"checkbox","aria-checked":n.value?"mixed":void 0,disabled:q.value,readonly:E.value,onFocus:F,onBlur:T},m),{...o,default:u=>{let{backgroundColorClasses:y,backgroundColorStyles:r}=u;return a("div",{class:["v-switch__track",...y.value],style:r.value,onClick:N},null)},input:u=>{let{inputNode:y,icon:r,backgroundColorClasses:H,backgroundColorStyles:J}=u;return a(ae,null,[y,a("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":r||e.loading},e.inset?void 0:H.value],style:e.inset?void 0:J.value},[a(te,null,{default:()=>[e.loading?a(oe,{name:"v-switch",active:!0,color:G.value===!1?void 0:U.value},{default:w=>o.loader?o.loader(w):a(se,{active:w.isActive,color:w.color,indeterminate:!0,size:"16",width:"2"},null)}):r&&a(le,{key:r,icon:r,size:"x-small"},null)]})])])}})}})}),{}}}),Ce=new ue,ke=new de,be={name:"LoginView",data:()=>({typeAuth:!1,form:{},typesDocument:[],loader:!1,rulesValidation:ie}),mounted(){this.getTypeDocument()},methods:{async getTypeDocument(){const e=await Ce.get("/type-document-user");this.typesDocument=e.data},async logIn(){this.loader=!0;const{valid:e}=await this.$refs.form.validate();if(e){const o=new FormData;this.typeAuth?o.append("email",this.form.email):(o.append("type_document",this.form.typesDocument),o.append("identification",this.form.identification)),o.append("password",this.form.password);const n=await ke.login(o);if(console.log("entro"),n.error){var t=new URL(window.location.href),d=t.searchParams.has("error");d?window.location.reload(!0):(t.searchParams.set("error","true"),window.location.href=t.toString());return}localStorage.setItem("auth-token",n.data.access_token),this.$router.push("/")}this.loader=!1}}};function Ae(e,t,d,o,n,i){return V(),p(re,{class:"d-flex justify-center align-center h-screen",ref:"form"},{default:l(()=>[a(ye,{width:"512",loading:e.loader},{default:l(()=>[a(ce,null,{default:l(()=>[P(" Inicio de sesión ")]),_:1}),a(me,null,{default:l(()=>[a(ge,{modelValue:e.typeAuth,"onUpdate:modelValue":t[0]||(t[0]=s=>e.typeAuth=s),label:"Ingreso por "+(e.typeAuth?"correo":"número de documento"),color:e.typeAuth?"orange":"primary"},null,8,["modelValue","label","color"])]),_:1}),a(fe,null,{default:l(()=>[a(Ve,null,{default:l(()=>[e.typeAuth?(V(),p(h,{key:0,cols:"12"},{default:l(()=>[a(g,{label:"Correo",rules:e.rulesValidation.email},null,8,["rules"])]),_:1})):C("",!0),e.typeAuth?C("",!0):(V(),p(h,{key:1,cols:"12",sm:"6"},{default:l(()=>[a(pe,{items:e.typesDocument,label:"Tipo de documento",modelValue:e.form.typesDocument,"onUpdate:modelValue":t[1]||(t[1]=s=>e.form.typesDocument=s),"item-title":"label","item-value":"name",rules:e.rulesValidation.select},null,8,["items","modelValue","rules"])]),_:1})),e.typeAuth?C("",!0):(V(),p(h,{key:2,cols:"12",sm:"6"},{default:l(()=>[a(g,{label:"Identificación",modelValue:e.form.identification,"onUpdate:modelValue":t[2]||(t[2]=s=>e.form.identification=s),rules:e.rulesValidation.identification},null,8,["modelValue","rules"])]),_:1})),a(h,{cols:"12"},{default:l(()=>[a(g,{label:"password",type:"password",rules:e.rulesValidation.password,modelValue:e.form.password,"onUpdate:modelValue":t[3]||(t[3]=s=>e.form.password=s)},null,8,["rules","modelValue"])]),_:1})]),_:1})]),_:1}),a(he,null,{default:l(()=>[a(ve,{color:"orange",onClick:i.logIn},{default:l(()=>[P(" Iniciar ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["loading"])]),_:1},512)}const De=ne(be,[["render",Ae]]);export{De as default};
