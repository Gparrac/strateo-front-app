import{_ as V,R as g,K as y,az as c,aD as w,aA as A,m as n,n as C,q as t,w as s,X as S,S as k,aH as v,H as D,V as I,aE as b,z as i,P as U,aF as T,aG as r,aI as $,M as d,Y as u,T as m,Z as P,D as M,N as p,U as N}from"./index-a135dbfa.js";import{A as B}from"./AlertMessage-e9bb247d.js";const F=new v,L=new D,R={name:"LoginView",components:{AlertMessage:B},data:()=>({typeAuth:!1,form:{},typesDocument:[],loader:!1,rulesValidation:g,showPassword:!1}),mounted(){this.getTypeDocument()},computed:{...y(w,c)},methods:{async getTypeDocument(){const e=await F.get("/type-document-user");this.typesDocument=e.data},async logIn(){this.loader=!0;const{valid:e}=await this.$refs.form.validate();if(e){const a=new FormData;this.typeAuth?a.append("email",this.form.email):(a.append("type_document",this.form.typesDocument),a.append("identification",this.form.identification)),a.append("password",this.form.password);const l=await L.login(a);l.statusResponse!=200?l.error&&typeof l.error=="object"?this.alertMessageStore.show(!1,"Verifica los campos.",l.error):this.alertMessageStore.show(!1,"Error en el servidor."):(this.alertMessageStore.show(!0,"Autenticación exitosa!"),this.userAuthStore.saveCredentials({user:l.user,...l.data}),localStorage.setItem("auth-token",l.data.access_token),localStorage.setItem("user",JSON.stringify(l.user)),this.$router.push("/"))}this.loader=!1}}},j={class:"d-flex justify-end"};function z(e,a,l,E,H,f){const h=A("alert-message");return n(),C(k,null,[t(h),t(S,{class:"d-flex justify-center align-center h-screen",ref:"form"},{default:s(()=>[t(I,{width:"512",loading:e.loader},{default:s(()=>[t(b,{class:"text-h3 pt-5 text-center"},{default:s(()=>[i(" Inicio de sesión ")]),_:1}),t(U,null,{default:s(()=>[t(T,null,{default:s(()=>[t(r,{cols:"12"},{default:s(()=>[t($,{modelValue:e.typeAuth,"onUpdate:modelValue":a[0]||(a[0]=o=>e.typeAuth=o),label:"Ingreso por "+(e.typeAuth?"correo":"número de documento"),color:e.typeAuth?"orange":"primary"},null,8,["modelValue","label","color"])]),_:1}),e.typeAuth?(n(),d(r,{key:0,cols:"12"},{default:s(()=>[t(u,{maxlength:e.rulesValidation.email.maxLength,label:"Correo",modelValue:e.form.email,"onUpdate:modelValue":a[1]||(a[1]=o=>e.form.email=o),rules:e.rulesValidation.email.rules},null,8,["maxlength","modelValue","rules"])]),_:1})):m("",!0),e.typeAuth?m("",!0):(n(),d(r,{key:1,cols:"12",sm:"6"},{default:s(()=>[t(P,{items:e.typesDocument,label:"Tipo de documento",modelValue:e.form.typesDocument,"onUpdate:modelValue":a[2]||(a[2]=o=>e.form.typesDocument=o),"item-title":"label","item-value":"name",rules:e.rulesValidation.select.rules},null,8,["items","modelValue","rules"])]),_:1})),e.typeAuth?m("",!0):(n(),d(r,{key:2,cols:"12",sm:"6"},{default:s(()=>[t(u,{maxlength:e.rulesValidation.identification.maxLength,label:"Identificación",modelValue:e.form.identification,"onUpdate:modelValue":a[3]||(a[3]=o=>e.form.identification=o),rules:e.rulesValidation.identification.rules},null,8,["maxlength","modelValue","rules"])]),_:1})),t(r,{cols:"12"},{default:s(()=>[t(u,{maxlength:e.rulesValidation.password.maxLength,label:"Contraseña",rules:e.rulesValidation.password.rules,"append-inner-icon":e.showPassword?"mdi-eye-off":"mdi-eye",type:e.showPassword?"text":"password","onClick:appendInner":a[4]||(a[4]=o=>e.showPassword=!e.showPassword),modelValue:e.form.password,"onUpdate:modelValue":a[5]||(a[5]=o=>e.form.password=o)},null,8,["maxlength","rules","append-inner-icon","type","modelValue"])]),_:1})]),_:1}),M("div",j,[t(p,{variant:"text",class:"text-right text-orange text-body-2",size:"sm",onClick:a[6]||(a[6]=o=>e.$router.push("recovery-password"))},{default:s(()=>[i("Olvidaste tu contraseña?")]),_:1})])]),_:1}),t(N,null,{default:s(()=>[t(p,{color:"orange",onClick:f.logIn},{default:s(()=>[i(" Iniciar ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["loading"])]),_:1},512)],64)}const G=V(R,[["render",z]]);export{G as default};
